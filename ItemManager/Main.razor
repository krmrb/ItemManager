@using Microsoft.AspNetCore.Components.Web
@using ItemManagerClient.Services
@inject IItemService ItemService
@inject ICategoryService CategoryService

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <base href="/" />
    <link href="css/app.css" rel="stylesheet" />
    <component type="typeof(HeadOutlet)" render-mode="ServerPrerendered" />
</head>
<body>
    <div class="page">
        <!-- Navigation Menu -->
        <div class="sidebar">
            <div class="top-row ps-3 navbar navbar-dark">
                <div class="container-fluid">
                    <a class="navbar-brand" href="">ItemManager</a>
                </div>
            </div>
            <nav class="flex-column">
                <div class="nav-item px-3">
                    <a class="nav-link @GetNavLinkClass("")" href="" @onclick="() => NavigateTo("")">
                        <span>🏠</span> Home
                    </a>
                </div>
                <div class="nav-item px-3">
                    <a class="nav-link @GetNavLinkClass("items")" href="items" @onclick="() => NavigateTo("items")">
                        <span>📋</span> Items
                    </a>
                </div>
                <div class="nav-item px-3">
                    <a class="nav-link @GetNavLinkClass("categories")" href="categories" @onclick="() => NavigateTo("categories")">
                        <span>🏷️</span> Categories
                    </a>
                </div>
            </nav>
        </div>

        <!-- Main Content -->
        <main>
            <article class="content px-4">
                @if (CurrentPage == "items" && IsCreating)
                {
                    <ItemForm />
                }
                else if (CurrentPage == "items")
                {
                    <ItemList />
                }
                else if (CurrentPage == "categories")
                {
                    <p>Categories page - coming soon</p>
                }
                else
                {
                    <HomePage />
                }
            </article>
        </main>
    </div>
</body>
</html>

@code {
    private string CurrentPage = "";
    private bool IsCreating = false;

    protected override void OnInitialized()
    {
        // Initialize navigation
    }

    private void NavigateTo(string page)
    {
        CurrentPage = page;
        IsCreating = false;
        StateHasChanged();
    }

    private void NavigateToCreate()
    {
        CurrentPage = "items";
        IsCreating = true;
        StateHasChanged();
    }

    private string GetNavLinkClass(string page)
    {
        return CurrentPage == page ? "active" : "";
    }
}